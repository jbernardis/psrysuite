If Harper's Ferry, return False

if OS is set to desired route, signal is green, os is cleared  and exit block is empty and cleared then true

if OS is set to a different route and it is cleared return False

if exit block is occupied, then false

if exit block is cleared in the opposite direction, then false

if exit block is cleared and OS is set to correct route but not cleared, then false (last train has not yet exited exit block)

if any needed signal or turnout is locked, then false

otherwise, true - may not currently be correct, but it can be freely made so